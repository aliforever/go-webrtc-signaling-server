package main

import (
	"fmt"
	"sync"

	webrtcsignalingserver "github.com/aliforever/go-webrtc-signaling-server"
)

func main() {
	s := webrtcsignalingserver.New()
	go func() {
		_, err := s.Listen(":80")
		panic(err)
	}()

	wg := &sync.WaitGroup{}
	listener, err := s.AddSDPListener("publisher")
	if err != nil {
		fmt.Println(err)
		return
	}

	wg.Add(2)

	go client(listener, wg)
	go server(listener, wg)

	wg.Wait()
}

func server(listener *webrtcsignalingserver.Listener, wg *sync.WaitGroup) {
	defer wg.Done()

	serverSDPBase64, _ := webrtcsignalingserver.DecodeBase64StringToWebrtcSDP("eyJ0eXBlIjoiYW5zd2VyIiwic2RwIjoidj0wXHJcbm89LSAyMDUwMTI5MTYxMDk4MTU3NjUgMTYzOTkzNDMwMiBJTiBJUDQgMC4wLjAuMFxyXG5zPS1cclxudD0wIDBcclxuYT1maW5nZXJwcmludDpzaGEtMjU2IEU2OjMyOjBGOkMyOjIxOkE4OkMxOkM3OjhDOkFBOjI0OkE4OkY3OjQ5OkQ1OjNBOjIyOjg4OjY4OjU4OjgyOjM3OkVBOkM5OkIwOjMzOjFFOjYyOjYyOjVGOjBCOkZBXHJcbmE9Z3JvdXA6QlVORExFIDBcclxubT12aWRlbyA5IFVEUC9UTFMvUlRQL1NBVlBGIDk2IDk3IDk4IDk5IDEwMiAxMjEgMTI3IDEyMCAxMjUgMTA3IDEwOCAxMDkgMTIzIDExOCAxMTZcclxuYz1JTiBJUDQgMC4wLjAuMFxyXG5hPXNldHVwOmFjdGl2ZVxyXG5hPW1pZDowXHJcbmE9aWNlLXVmcmFnOnNNYnhlR3diY1NBRmhnRWZcclxuYT1pY2UtcHdkOnBpUk1nT3lmZXlCVGhqenVhQU94cmRVZWRzT1lTbWx0XHJcbmE9cnRjcC1tdXhcclxuYT1ydGNwLXJzaXplXHJcbmE9cnRwbWFwOjk2IFZQOC85MDAwMFxyXG5hPXJ0Y3AtZmI6OTYgZ29vZy1yZW1iIFxyXG5hPXJ0Y3AtZmI6OTYgdHJhbnNwb3J0LWNjIFxyXG5hPXJ0Y3AtZmI6OTYgY2NtIGZpclxyXG5hPXJ0Y3AtZmI6OTYgbmFjayBcclxuYT1ydGNwLWZiOjk2IG5hY2sgcGxpXHJcbmE9cnRwbWFwOjk3IHJ0eC85MDAwMFxyXG5hPWZtdHA6OTcgYXB0PTk2XHJcbmE9cnRwbWFwOjk4IFZQOS85MDAwMFxyXG5hPWZtdHA6OTggcHJvZmlsZS1pZD0wXHJcbmE9cnRjcC1mYjo5OCBnb29nLXJlbWIgXHJcbmE9cnRjcC1mYjo5OCB0cmFuc3BvcnQtY2MgXHJcbmE9cnRjcC1mYjo5OCBjY20gZmlyXHJcbmE9cnRjcC1mYjo5OCBuYWNrIFxyXG5hPXJ0Y3AtZmI6OTggbmFjayBwbGlcclxuYT1ydHBtYXA6OTkgcnR4LzkwMDAwXHJcbmE9Zm10cDo5OSBhcHQ9OThcclxuYT1ydHBtYXA6MTAyIEgyNjQvOTAwMDBcclxuYT1mbXRwOjEwMiBsZXZlbC1hc3ltbWV0cnktYWxsb3dlZD0xO3BhY2tldGl6YXRpb24tbW9kZT0xO3Byb2ZpbGUtbGV2ZWwtaWQ9NDIwMDFmXHJcbmE9cnRjcC1mYjoxMDIgZ29vZy1yZW1iIFxyXG5hPXJ0Y3AtZmI6MTAyIHRyYW5zcG9ydC1jYyBcclxuYT1ydGNwLWZiOjEwMiBjY20gZmlyXHJcbmE9cnRjcC1mYjoxMDIgbmFjayBcclxuYT1ydGNwLWZiOjEwMiBuYWNrIHBsaVxyXG5hPXJ0cG1hcDoxMjEgcnR4LzkwMDAwXHJcbmE9Zm10cDoxMjEgYXB0PTEwMlxyXG5hPXJ0cG1hcDoxMjcgSDI2NC85MDAwMFxyXG5hPWZtdHA6MTI3IGxldmVsLWFzeW1tZXRyeS1hbGxvd2VkPTE7cGFja2V0aXphdGlvbi1tb2RlPTA7cHJvZmlsZS1sZXZlbC1pZD00MjAwMWZcclxuYT1ydGNwLWZiOjEyNyBnb29nLXJlbWIgXHJcbmE9cnRjcC1mYjoxMjcgdHJhbnNwb3J0LWNjIFxyXG5hPXJ0Y3AtZmI6MTI3IGNjbSBmaXJcclxuYT1ydGNwLWZiOjEyNyBuYWNrIFxyXG5hPXJ0Y3AtZmI6MTI3IG5hY2sgcGxpXHJcbmE9cnRwbWFwOjEyMCBydHgvOTAwMDBcclxuYT1mbXRwOjEyMCBhcHQ9MTI3XHJcbmE9cnRwbWFwOjEyNSBIMjY0LzkwMDAwXHJcbmE9Zm10cDoxMjUgbGV2ZWwtYXN5bW1ldHJ5LWFsbG93ZWQ9MTtwYWNrZXRpemF0aW9uLW1vZGU9MTtwcm9maWxlLWxldmVsLWlkPTQyZTAxZlxyXG5hPXJ0Y3AtZmI6MTI1IGdvb2ctcmVtYiBcclxuYT1ydGNwLWZiOjEyNSB0cmFuc3BvcnQtY2MgXHJcbmE9cnRjcC1mYjoxMjUgY2NtIGZpclxyXG5hPXJ0Y3AtZmI6MTI1IG5hY2sgXHJcbmE9cnRjcC1mYjoxMjUgbmFjayBwbGlcclxuYT1ydHBtYXA6MTA3IHJ0eC85MDAwMFxyXG5hPWZtdHA6MTA3IGFwdD0xMjVcclxuYT1ydHBtYXA6MTA4IEgyNjQvOTAwMDBcclxuYT1mbXRwOjEwOCBsZXZlbC1hc3ltbWV0cnktYWxsb3dlZD0xO3BhY2tldGl6YXRpb24tbW9kZT0wO3Byb2ZpbGUtbGV2ZWwtaWQ9NDJlMDFmXHJcbmE9cnRjcC1mYjoxMDggZ29vZy1yZW1iIFxyXG5hPXJ0Y3AtZmI6MTA4IHRyYW5zcG9ydC1jYyBcclxuYT1ydGNwLWZiOjEwOCBjY20gZmlyXHJcbmE9cnRjcC1mYjoxMDggbmFjayBcclxuYT1ydGNwLWZiOjEwOCBuYWNrIHBsaVxyXG5hPXJ0cG1hcDoxMDkgcnR4LzkwMDAwXHJcbmE9Zm10cDoxMDkgYXB0PTEwOFxyXG5hPXJ0cG1hcDoxMjMgSDI2NC85MDAwMFxyXG5hPWZtdHA6MTIzIGxldmVsLWFzeW1tZXRyeS1hbGxvd2VkPTE7cGFja2V0aXphdGlvbi1tb2RlPTE7cHJvZmlsZS1sZXZlbC1pZD02NDAwMWZcclxuYT1ydGNwLWZiOjEyMyBnb29nLXJlbWIgXHJcbmE9cnRjcC1mYjoxMjMgdHJhbnNwb3J0LWNjIFxyXG5hPXJ0Y3AtZmI6MTIzIGNjbSBmaXJcclxuYT1ydGNwLWZiOjEyMyBuYWNrIFxyXG5hPXJ0Y3AtZmI6MTIzIG5hY2sgcGxpXHJcbmE9cnRwbWFwOjExOCBydHgvOTAwMDBcclxuYT1mbXRwOjExOCBhcHQ9MTIzXHJcbmE9cnRwbWFwOjExNiB1bHBmZWMvOTAwMDBcclxuYT1leHRtYXA6NCBodHRwOi8vd3d3LmlldGYub3JnL2lkL2RyYWZ0LWhvbG1lci1ybWNhdC10cmFuc3BvcnQtd2lkZS1jYy1leHRlbnNpb25zLTAxXHJcbmE9c3NyYzo5NTUwNDgzOTAgY25hbWU6UFJUZUlWbmZyZFdTWVBUSFxyXG5hPXNzcmM6OTU1MDQ4MzkwIG1zaWQ6UFJUZUlWbmZyZFdTWVBUSCBNS0dhSExreEtrcG91S0x4XHJcbmE9c3NyYzo5NTUwNDgzOTAgbXNsYWJlbDpQUlRlSVZuZnJkV1NZUFRIXHJcbmE9c3NyYzo5NTUwNDgzOTAgbGFiZWw6TUtHYUhMa3hLa3BvdUtMeFxyXG5hPW1zaWQ6UFJUZUlWbmZyZFdTWVBUSCBNS0dhSExreEtrcG91S0x4XHJcbmE9c2VuZHJlY3ZcclxuYT1jYW5kaWRhdGU6MjM4ODU3NDEwMSAxIHVkcCAyMTMwNzA2NDMxIDE5Mi4xNjguMS4xMDcgNTMzNzkgdHlwIGhvc3RcclxuYT1jYW5kaWRhdGU6MjM4ODU3NDEwMSAyIHVkcCAyMTMwNzA2NDMxIDE5Mi4xNjguMS4xMDcgNTMzNzkgdHlwIGhvc3RcclxuYT1jYW5kaWRhdGU6MTY3ODQyMzA0OCAxIHVkcCAyMTMwNzA2NDMxIDE3Mi4zMS4yNDAuMSA1MzM4MCB0eXAgaG9zdFxyXG5hPWNhbmRpZGF0ZToxNjc4NDIzMDQ4IDIgdWRwIDIxMzA3MDY0MzEgMTcyLjMxLjI0MC4xIDUzMzgwIHR5cCBob3N0XHJcbmE9Y2FuZGlkYXRlOjg1NTY5Mzg1IDEgdWRwIDE2OTQ0OTg4MTUgNS4xMjEuODAuNjMgNjQ5ODUgdHlwIHNyZmx4IHJhZGRyIDAuMC4wLjAgcnBvcnQgNjQ3MzFcclxuYT1jYW5kaWRhdGU6ODU1NjkzODUgMiB1ZHAgMTY5NDQ5ODgxNSA1LjEyMS44MC42MyA2NDk4NSB0eXAgc3JmbHggcmFkZHIgMC4wLjAuMCBycG9ydCA2NDczMVxyXG5hPWVuZC1vZi1jYW5kaWRhdGVzXHJcbiJ9")

	clientSDP, data := listener.ReadClientSDP()
	fmt.Println("client SDPServer is:", clientSDP, "with data", data)

	fmt.Println("Writing server SDPServer")
	err := listener.WriteServerSDP(serverSDPBase64, nil)
	if err != nil {
		fmt.Println("error writing server sdp", err)
	}
}

func client(listener *webrtcsignalingserver.Listener, wg *sync.WaitGroup) {
	defer wg.Done()

	clientSDPBase64 := "eyJ0eXBlIjoib2ZmZXIiLCJzZHAiOiJ2PTBcclxubz0tIDU1NTMyNDM3MTMyNjgzOTYwMzYgMiBJTiBJUDQgMTI3LjAuMC4xXHJcbnM9LVxyXG50PTAgMFxyXG5hPWdyb3VwOkJVTkRMRSAwXHJcbmE9ZXh0bWFwLWFsbG93LW1peGVkXHJcbmE9bXNpZC1zZW1hbnRpYzogV01TIHRabFRBUGl2Qm5UcTBnempiQjFWd25xQ1c3eGtxRWQwMnZrYVxyXG5tPXZpZGVvIDY0OTg0IFVEUC9UTFMvUlRQL1NBVlBGIDk2IDk3IDk4IDk5IDEwMCAxMDEgMTAyIDEyMSAxMjcgMTIwIDEyNSAxMDcgMTA4IDEwOSAzNSAzNiAxMjQgMTE5IDEyMyAxMTggMTE0IDExNSAxMTZcclxuYz1JTiBJUDQgNS4xMjEuODAuNjNcclxuYT1ydGNwOjkgSU4gSVA0IDAuMC4wLjBcclxuYT1jYW5kaWRhdGU6Nzc5MjUxOTM3IDEgdWRwIDIxMTM5MzcxNTEgYTM4ODA3OTUtNGM3Yy00ODQ1LTg0OTMtNzZjNDE3MmY2ZmE5LmxvY2FsIDY0NDE3IHR5cCBob3N0IGdlbmVyYXRpb24gMCBuZXR3b3JrLWNvc3QgOTk5XHJcbmE9Y2FuZGlkYXRlOjg0MjE2MzA0OSAxIHVkcCAxNjc3NzI5NTM1IDUuMTIxLjgwLjYzIDY0OTg0IHR5cCBzcmZseCByYWRkciAwLjAuMC4wIHJwb3J0IDAgZ2VuZXJhdGlvbiAwIG5ldHdvcmstY29zdCA5OTlcclxuYT1pY2UtdWZyYWc6WnJSL1xyXG5hPWljZS1wd2Q6WVArVGVxYVAybnNIK1B1djJoRGNpNU1MXHJcbmE9aWNlLW9wdGlvbnM6dHJpY2tsZVxyXG5hPWZpbmdlcnByaW50OnNoYS0yNTYgQTI6Q0M6OTU6NUI6ODU6N0U6MkM6ODI6MkI6REI6QzE6NUM6OTY6Qjg6Mzk6RTE6OTU6QUE6NTA6MEY6RDY6RTQ6QTg6RkI6M0E6NkU6NjM6RkI6NkQ6RUU6MzQ6OEZcclxuYT1zZXR1cDphY3RwYXNzXHJcbmE9bWlkOjBcclxuYT1leHRtYXA6MSB1cm46aWV0ZjpwYXJhbXM6cnRwLWhkcmV4dDp0b2Zmc2V0XHJcbmE9ZXh0bWFwOjIgaHR0cDovL3d3dy53ZWJydGMub3JnL2V4cGVyaW1lbnRzL3J0cC1oZHJleHQvYWJzLXNlbmQtdGltZVxyXG5hPWV4dG1hcDozIHVybjozZ3BwOnZpZGVvLW9yaWVudGF0aW9uXHJcbmE9ZXh0bWFwOjQgaHR0cDovL3d3dy5pZXRmLm9yZy9pZC9kcmFmdC1ob2xtZXItcm1jYXQtdHJhbnNwb3J0LXdpZGUtY2MtZXh0ZW5zaW9ucy0wMVxyXG5hPWV4dG1hcDo1IGh0dHA6Ly93d3cud2VicnRjLm9yZy9leHBlcmltZW50cy9ydHAtaGRyZXh0L3BsYXlvdXQtZGVsYXlcclxuYT1leHRtYXA6NiBodHRwOi8vd3d3LndlYnJ0Yy5vcmcvZXhwZXJpbWVudHMvcnRwLWhkcmV4dC92aWRlby1jb250ZW50LXR5cGVcclxuYT1leHRtYXA6NyBodHRwOi8vd3d3LndlYnJ0Yy5vcmcvZXhwZXJpbWVudHMvcnRwLWhkcmV4dC92aWRlby10aW1pbmdcclxuYT1leHRtYXA6OCBodHRwOi8vd3d3LndlYnJ0Yy5vcmcvZXhwZXJpbWVudHMvcnRwLWhkcmV4dC9jb2xvci1zcGFjZVxyXG5hPWV4dG1hcDo5IHVybjppZXRmOnBhcmFtczpydHAtaGRyZXh0OnNkZXM6bWlkXHJcbmE9ZXh0bWFwOjEwIHVybjppZXRmOnBhcmFtczpydHAtaGRyZXh0OnNkZXM6cnRwLXN0cmVhbS1pZFxyXG5hPWV4dG1hcDoxMSB1cm46aWV0ZjpwYXJhbXM6cnRwLWhkcmV4dDpzZGVzOnJlcGFpcmVkLXJ0cC1zdHJlYW0taWRcclxuYT1zZW5kcmVjdlxyXG5hPW1zaWQ6dFpsVEFQaXZCblRxMGd6amJCMVZ3bnFDVzd4a3FFZDAydmthIGEwNDcyZTY1LTNmYWYtNGZmZC04ZDVjLTJjYTJjMThhMWIxOFxyXG5hPXJ0Y3AtbXV4XHJcbmE9cnRjcC1yc2l6ZVxyXG5hPXJ0cG1hcDo5NiBWUDgvOTAwMDBcclxuYT1ydGNwLWZiOjk2IGdvb2ctcmVtYlxyXG5hPXJ0Y3AtZmI6OTYgdHJhbnNwb3J0LWNjXHJcbmE9cnRjcC1mYjo5NiBjY20gZmlyXHJcbmE9cnRjcC1mYjo5NiBuYWNrXHJcbmE9cnRjcC1mYjo5NiBuYWNrIHBsaVxyXG5hPXJ0cG1hcDo5NyBydHgvOTAwMDBcclxuYT1mbXRwOjk3IGFwdD05NlxyXG5hPXJ0cG1hcDo5OCBWUDkvOTAwMDBcclxuYT1ydGNwLWZiOjk4IGdvb2ctcmVtYlxyXG5hPXJ0Y3AtZmI6OTggdHJhbnNwb3J0LWNjXHJcbmE9cnRjcC1mYjo5OCBjY20gZmlyXHJcbmE9cnRjcC1mYjo5OCBuYWNrXHJcbmE9cnRjcC1mYjo5OCBuYWNrIHBsaVxyXG5hPWZtdHA6OTggcHJvZmlsZS1pZD0wXHJcbmE9cnRwbWFwOjk5IHJ0eC85MDAwMFxyXG5hPWZtdHA6OTkgYXB0PTk4XHJcbmE9cnRwbWFwOjEwMCBWUDkvOTAwMDBcclxuYT1ydGNwLWZiOjEwMCBnb29nLXJlbWJcclxuYT1ydGNwLWZiOjEwMCB0cmFuc3BvcnQtY2NcclxuYT1ydGNwLWZiOjEwMCBjY20gZmlyXHJcbmE9cnRjcC1mYjoxMDAgbmFja1xyXG5hPXJ0Y3AtZmI6MTAwIG5hY2sgcGxpXHJcbmE9Zm10cDoxMDAgcHJvZmlsZS1pZD0yXHJcbmE9cnRwbWFwOjEwMSBydHgvOTAwMDBcclxuYT1mbXRwOjEwMSBhcHQ9MTAwXHJcbmE9cnRwbWFwOjEwMiBIMjY0LzkwMDAwXHJcbmE9cnRjcC1mYjoxMDIgZ29vZy1yZW1iXHJcbmE9cnRjcC1mYjoxMDIgdHJhbnNwb3J0LWNjXHJcbmE9cnRjcC1mYjoxMDIgY2NtIGZpclxyXG5hPXJ0Y3AtZmI6MTAyIG5hY2tcclxuYT1ydGNwLWZiOjEwMiBuYWNrIHBsaVxyXG5hPWZtdHA6MTAyIGxldmVsLWFzeW1tZXRyeS1hbGxvd2VkPTE7cGFja2V0aXphdGlvbi1tb2RlPTE7cHJvZmlsZS1sZXZlbC1pZD00MjAwMWZcclxuYT1ydHBtYXA6MTIxIHJ0eC85MDAwMFxyXG5hPWZtdHA6MTIxIGFwdD0xMDJcclxuYT1ydHBtYXA6MTI3IEgyNjQvOTAwMDBcclxuYT1ydGNwLWZiOjEyNyBnb29nLXJlbWJcclxuYT1ydGNwLWZiOjEyNyB0cmFuc3BvcnQtY2NcclxuYT1ydGNwLWZiOjEyNyBjY20gZmlyXHJcbmE9cnRjcC1mYjoxMjcgbmFja1xyXG5hPXJ0Y3AtZmI6MTI3IG5hY2sgcGxpXHJcbmE9Zm10cDoxMjcgbGV2ZWwtYXN5bW1ldHJ5LWFsbG93ZWQ9MTtwYWNrZXRpemF0aW9uLW1vZGU9MDtwcm9maWxlLWxldmVsLWlkPTQyMDAxZlxyXG5hPXJ0cG1hcDoxMjAgcnR4LzkwMDAwXHJcbmE9Zm10cDoxMjAgYXB0PTEyN1xyXG5hPXJ0cG1hcDoxMjUgSDI2NC85MDAwMFxyXG5hPXJ0Y3AtZmI6MTI1IGdvb2ctcmVtYlxyXG5hPXJ0Y3AtZmI6MTI1IHRyYW5zcG9ydC1jY1xyXG5hPXJ0Y3AtZmI6MTI1IGNjbSBmaXJcclxuYT1ydGNwLWZiOjEyNSBuYWNrXHJcbmE9cnRjcC1mYjoxMjUgbmFjayBwbGlcclxuYT1mbXRwOjEyNSBsZXZlbC1hc3ltbWV0cnktYWxsb3dlZD0xO3BhY2tldGl6YXRpb24tbW9kZT0xO3Byb2ZpbGUtbGV2ZWwtaWQ9NDJlMDFmXHJcbmE9cnRwbWFwOjEwNyBydHgvOTAwMDBcclxuYT1mbXRwOjEwNyBhcHQ9MTI1XHJcbmE9cnRwbWFwOjEwOCBIMjY0LzkwMDAwXHJcbmE9cnRjcC1mYjoxMDggZ29vZy1yZW1iXHJcbmE9cnRjcC1mYjoxMDggdHJhbnNwb3J0LWNjXHJcbmE9cnRjcC1mYjoxMDggY2NtIGZpclxyXG5hPXJ0Y3AtZmI6MTA4IG5hY2tcclxuYT1ydGNwLWZiOjEwOCBuYWNrIHBsaVxyXG5hPWZtdHA6MTA4IGxldmVsLWFzeW1tZXRyeS1hbGxvd2VkPTE7cGFja2V0aXphdGlvbi1tb2RlPTA7cHJvZmlsZS1sZXZlbC1pZD00MmUwMWZcclxuYT1ydHBtYXA6MTA5IHJ0eC85MDAwMFxyXG5hPWZtdHA6MTA5IGFwdD0xMDhcclxuYT1ydHBtYXA6MzUgQVYxLzkwMDAwXHJcbmE9cnRjcC1mYjozNSBnb29nLXJlbWJcclxuYT1ydGNwLWZiOjM1IHRyYW5zcG9ydC1jY1xyXG5hPXJ0Y3AtZmI6MzUgY2NtIGZpclxyXG5hPXJ0Y3AtZmI6MzUgbmFja1xyXG5hPXJ0Y3AtZmI6MzUgbmFjayBwbGlcclxuYT1ydHBtYXA6MzYgcnR4LzkwMDAwXHJcbmE9Zm10cDozNiBhcHQ9MzVcclxuYT1ydHBtYXA6MTI0IEgyNjQvOTAwMDBcclxuYT1ydGNwLWZiOjEyNCBnb29nLXJlbWJcclxuYT1ydGNwLWZiOjEyNCB0cmFuc3BvcnQtY2NcclxuYT1ydGNwLWZiOjEyNCBjY20gZmlyXHJcbmE9cnRjcC1mYjoxMjQgbmFja1xyXG5hPXJ0Y3AtZmI6MTI0IG5hY2sgcGxpXHJcbmE9Zm10cDoxMjQgbGV2ZWwtYXN5bW1ldHJ5LWFsbG93ZWQ9MTtwYWNrZXRpemF0aW9uLW1vZGU9MTtwcm9maWxlLWxldmVsLWlkPTRkMDAxZlxyXG5hPXJ0cG1hcDoxMTkgcnR4LzkwMDAwXHJcbmE9Zm10cDoxMTkgYXB0PTEyNFxyXG5hPXJ0cG1hcDoxMjMgSDI2NC85MDAwMFxyXG5hPXJ0Y3AtZmI6MTIzIGdvb2ctcmVtYlxyXG5hPXJ0Y3AtZmI6MTIzIHRyYW5zcG9ydC1jY1xyXG5hPXJ0Y3AtZmI6MTIzIGNjbSBmaXJcclxuYT1ydGNwLWZiOjEyMyBuYWNrXHJcbmE9cnRjcC1mYjoxMjMgbmFjayBwbGlcclxuYT1mbXRwOjEyMyBsZXZlbC1hc3ltbWV0cnktYWxsb3dlZD0xO3BhY2tldGl6YXRpb24tbW9kZT0xO3Byb2ZpbGUtbGV2ZWwtaWQ9NjQwMDFmXHJcbmE9cnRwbWFwOjExOCBydHgvOTAwMDBcclxuYT1mbXRwOjExOCBhcHQ9MTIzXHJcbmE9cnRwbWFwOjExNCByZWQvOTAwMDBcclxuYT1ydHBtYXA6MTE1IHJ0eC85MDAwMFxyXG5hPWZtdHA6MTE1IGFwdD0xMTRcclxuYT1ydHBtYXA6MTE2IHVscGZlYy85MDAwMFxyXG5hPXNzcmMtZ3JvdXA6RklEIDEzNzMzNjQ0NjggMjI0NjMxNTM5NVxyXG5hPXNzcmM6MTM3MzM2NDQ2OCBjbmFtZTpoKzRJMFlnd2M3dE1wR3RTXHJcbmE9c3NyYzoxMzczMzY0NDY4IG1zaWQ6dFpsVEFQaXZCblRxMGd6amJCMVZ3bnFDVzd4a3FFZDAydmthIGEwNDcyZTY1LTNmYWYtNGZmZC04ZDVjLTJjYTJjMThhMWIxOFxyXG5hPXNzcmM6MTM3MzM2NDQ2OCBtc2xhYmVsOnRabFRBUGl2Qm5UcTBnempiQjFWd25xQ1c3eGtxRWQwMnZrYVxyXG5hPXNzcmM6MTM3MzM2NDQ2OCBsYWJlbDphMDQ3MmU2NS0zZmFmLTRmZmQtOGQ1Yy0yY2EyYzE4YTFiMThcclxuYT1zc3JjOjIyNDYzMTUzOTUgY25hbWU6aCs0STBZZ3djN3RNcEd0U1xyXG5hPXNzcmM6MjI0NjMxNTM5NSBtc2lkOnRabFRBUGl2Qm5UcTBnempiQjFWd25xQ1c3eGtxRWQwMnZrYSBhMDQ3MmU2NS0zZmFmLTRmZmQtOGQ1Yy0yY2EyYzE4YTFiMThcclxuYT1zc3JjOjIyNDYzMTUzOTUgbXNsYWJlbDp0WmxUQVBpdkJuVHEwZ3pqYkIxVnducUNXN3hrcUVkMDJ2a2FcclxuYT1zc3JjOjIyNDYzMTUzOTUgbGFiZWw6YTA0NzJlNjUtM2ZhZi00ZmZkLThkNWMtMmNhMmMxOGExYjE4XHJcbiJ9"

	fmt.Println("Writing Client SDPServer")
	err := listener.WriteClientSDP(clientSDPBase64, nil)
	if err != nil {
		fmt.Println(err)
		return
	}

	serverSDP := listener.ReadServerSDP()
	fmt.Println("Received Server SDPServer", serverSDP.Base64(), "with data", serverSDP.Data)
}
